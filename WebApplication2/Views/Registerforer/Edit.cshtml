@model WebApplication2.Models.ObstacleData

@{
    ViewData["Title"] = "Rediger innmelding – " + Model.ObstacleName;
}

<section class="px-4 py-10 max-w-3xl mx-auto text-slate-100">

    <a asp-action="Index" class="text-sm text-slate-400 hover:text-slate-200">
        ← Tilbake til oversikt
    </a>

    <header class="mt-3 mb-6">
        <h1 class="text-3xl font-semibold tracking-tight">
            Rediger innmelding
        </h1>
        <p class="mt-2 text-sm text-slate-400">
            Du kan oppdatere navn, høyde og beskrivelse. Kartgeometrien beholdes slik den ble meldt inn.
        </p>
    </header>

    <form asp-action="Edit" asp-route-id="@Model.Id" method="post" class="space-y-6">
        @Html.AntiForgeryToken()

        <!-- Viktig: Id må sendes tilbake -->
        <input type="hidden" asp-for="Id" />

        <!-- Viktig: behold eksisterende geometri + metadata -->
        <input type="hidden" asp-for="GeometryGeoJson" />
        <input type="hidden" asp-for="Latitude" />
        <input type="hidden" asp-for="Longitude" />
        <input type="hidden" asp-for="CreatedAt" />
        <input type="hidden" asp-for="ReporterEmail" />
        <input type="hidden" asp-for="Status" />

        <div class="space-y-1">
            <label asp-for="ObstacleName" class="block text-sm font-medium text-slate-200"></label>
            <input asp-for="ObstacleName"
                   class="w-full rounded-xl border border-slate-700 bg-slate-950/70 px-3 py-2 text-sm text-slate-100
                          focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500" />
            <span asp-validation-for="ObstacleName" class="text-xs text-rose-400"></span>
        </div>

        <div class="space-y-1">
            <label asp-for="ObstacleHeight" class="block text-sm font-medium text-slate-200"></label>
            <input asp-for="ObstacleHeight" type="number" step="0.1"
                   class="w-full rounded-xl border border-slate-700 bg-slate-950/70 px-3 py-2 text-sm text-slate-100
                          focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500" />
            <span asp-validation-for="ObstacleHeight" class="text-xs text-rose-400"></span>
        </div>

        <div class="space-y-1">
            <label asp-for="ObstacleDescription" class="block text-sm font-medium text-slate-200"></label>
            <textarea asp-for="ObstacleDescription" rows="5"
                      class="w-full rounded-xl border border-slate-700 bg-slate-950/70 px-3 py-2 text-sm text-slate-100
                             focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"></textarea>
            <span asp-validation-for="ObstacleDescription" class="text-xs text-rose-400"></span>
        </div>

        <div class="text-xs text-slate-400 bg-slate-900/70 border border-slate-800 rounded-xl px-3 py-2">
            Kartgeometrien (området du tegnet i kartet) endres ikke her.
            Dersom plasseringen er feil, bør du slette innmeldingen og registrere på nytt.
        </div>

        <div class="pt-4 flex gap-3">
            <button type="submit"
                    class="px-5 py-2.5 rounded-full text-sm font-medium
                           bg-sky-600 hover:bg-sky-700 text-white
                           transition active:scale-[0.97]">
                Lagre endringer
            </button>

            <a asp-action="Details" asp-route-id="@Model.Id"
               class="px-5 py-2.5 rounded-full text-sm font-medium
                      border border-slate-600 bg-slate-900 hover:bg-slate-800 text-slate-100
                      transition active:scale-[0.97]">
                Avbryt
            </a>
        </div>
    </form>
</section>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

