@model string
@{
    ViewData["Title"] = "Home Page";
}

<section class="text-center mt-10 px-4">
    <h1 class="text-3xl font-semibold text-slate-100 tracking-tight">Welcome</h1>

    @* ------------------------- ADMIN DASHBOARD ------------------------- *@
    @if (User.IsInRole("Admin"))
    {
        <div class="max-w-4xl mx-auto mt-10 grid grid-cols-1 md:grid-cols-2 gap-6">

            <!-- Admin Panel – eneste funksjon for Admin på forsiden -->
            <a asp-controller="Admin" asp-action="Index"
               class="md:col-span-2 flex flex-col items-center justify-center rounded-2xl
                          bg-rose-600 hover:bg-rose-700 text-white text-center p-8 shadow-xl
                          transition active:scale-[0.98]">
                <span class="text-2xl font-semibold">Admin Panel</span>
                <span class="text-sm opacity-80 mt-2">
                    Manage user roles and system configuration
                </span>
            </a>
        </div>
    }
    @* --------------------- REGISTERFØRER DASHBOARD --------------------- *@
    else if (User.IsInRole("Registerforer"))
    {
        <div class="max-w-4xl mx-auto mt-10 grid grid-cols-1 md:grid-cols-2 gap-6">           

            <!-- Rapportoversikt (liste) -->
            <a asp-controller="Registerforer" asp-action="Index"
              class="md:col-span-2 flex flex-col items-center justify-center rounded-2xl
                bg-amber-600 hover:bg-amber-500 text-white text-center p-8 shadow-xl
                transition active:scale-[0.98]">
         <span class="text-2xl font-semibold">Reports overview</span>
         <span class="text-sm opacity-90 mt-2">Review, approve or edit reports</span>
           </a>


            <!-- Kartoversikt (MapAll) -->
           <a asp-controller="Registerforer" asp-action="MapAll"
             class="md:col-span-2 flex flex-col items-center justify-center rounded-2xl
                bg-sky-700 hover:bg-sky-600 text-white text-center p-8 shadow-xl
                transition active:scale-[0.98]">
         <span class="text-2xl font-semibold">Map overview</span>
         <span class="text-sm opacity-90 mt-2">View all obstacle submissions on map</span>
           </a>           
        </div>
    }
    @* --------------------- VANLIG BRUKER DASHBOARD (Pilot) --------------------- *@
    else if (User.Identity?.IsAuthenticated ?? false)
    {
        <div class="max-w-4xl mx-auto mt-10 grid grid-cols-1 md:grid-cols-2 gap-6">

            <!-- Report Obstacle (pilot) -->
            <a asp-controller="Obstacle" asp-action="DataForm"
               class="flex flex-col items-center justify-center rounded-2xl
                          bg-sky-600 hover:bg-sky-700 text-white text-center p-8 shadow-xl
                          transition active:scale-[0.98]">
                <span class="text-2xl font-semibold">Report Obstacle</span>
                <span class="text-sm opacity-80 mt-2">Submit a new report</span>
            </a>

            <!-- Pilot Mode -->
            <a asp-controller="Home" asp-action="PilotMode"
               class="flex flex-col items-center justify-center rounded-2xl
                          bg-emerald-600 hover:bg-emerald-700 text-white text-center p-8 shadow-xl
                          transition active:scale-[0.98]">
                <span class="text-2xl font-semibold">Pilot Mode</span>
                <span class="text-sm opacity-80 mt-2">
                    Live position with nearby obstacles
                </span>
            </a>

            <!-- Heatmap (kun visning) -->
            <a asp-controller="Home" asp-action="ObstacleHeatmap"
               class="md:col-span-2 flex flex-col items-center justify-center rounded-2xl
                          bg-blue-600 hover:bg-blue-700 text-white text-center p-8 shadow-xl
                          transition active:scale-[0.98]">
                <span class="text-2xl font-semibold">View Heatmap</span>
                <span class="text-sm opacity-80 mt-2">
                    See obstacle density (NRL point data) in your area
                </span>
            </a>
        </div>
    }
    @* --------------------- IKKE INNLOGGET --------------------- *@
    else
    {
        <div class="max-w-md mx-auto mt-10">
            <a asp-area="Identity"
               asp-page="/Account/Login"
               asp-route-returnUrl="@Url.Action("DataForm", "Obstacle")"
               class="block w-full rounded-2xl bg-sky-600 hover:bg-sky-700 text-white
                          text-center text-xl font-semibold p-8 shadow-xl transition active:scale-[0.98]">
                Log in to report obstacle
            </a>
        </div>
    }

    @* Status-linje under *@
    <div class="mt-8 text-sm text-slate-400">
        @if (User.Identity?.IsAuthenticated ?? false)
        {
            <span>You are logged in as <strong class="text-slate-200">@User.Identity.Name</strong>.</span>
        }
        else
        {
            <span>Please log in using the links in the top right corner.</span>
        }
    </div>

    <!-- SUCCESS ALERT -->
    @if (!string.IsNullOrEmpty(Model))
    {
        <div class="max-w-md mx-auto mt-6 mb-4 text-center
                        rounded-lg border border-emerald-300
                        bg-emerald-50 text-emerald-700
                        px-3 py-2 flex items-center justify-center gap-2
                        text-sm shadow-sm">
            <span class="font-semibold">✓</span>
            <span>@Model</span>
        </div>
    }
</section>
