@model string
@{
    ViewData["Title"] = "Home Page";
}

@if (!string.IsNullOrEmpty(Model))
{
    <div class="alert alert-success d-flex align-items-center gap-2" role="alert">
        <span class="badge bg-success-subtle border border-success-subtle text-success-emphasis me-1">✓</span>
        <span>@Model</span>
    </div>
}

<section class="hero text-center">
    <h1 class="display-5 fw-semibold mb-2">Welcome</h1>
   
    <div class="d-flex flex-wrap justify-content-center gap-3">
        @if (User.Identity?.IsAuthenticated ?? false)
        {
            <!-- Innlogget: rett til registreringsskjema -->
            <a asp-action="DataForm"
               asp-controller="Obstacle"
               class="btn btn-primary btn-lg px-4">
                Register obstacle
            </a>
        }
        else
        {
            <!-- Ikke innlogget: send til Identity Login med retur til DataForm -->
            <a asp-area="Identity"
               asp-page="/Account/Login"
               asp-route-returnUrl="@Url.Action("DataForm", "Obstacle")"
               class="btn btn-primary btn-lg px-4">
                Log in to register obstacle
            </a>
        }

        @* Vis Admin-knapp bare når bruker er Admin *@
        @if (User.IsInRole("Admin"))
        {
            <a asp-action="Index" asp-controller="Admin" class="btn btn-outline-secondary px-4">
                Admin Panel
            </a>
        }
    </div>

    @* Liten status for innlogging under CTA *@
    <div class="mt-4 small text-muted">
        @if (User.Identity?.IsAuthenticated ?? false)
        {
            <span>Du er innlogget som <strong>@User.Identity!.Name</strong>.</span>
        }
        else
        {
            <span>Har du konto? Bruk lenkene oppe til høyre for å logge inn eller registrere deg.</span>
        }
    </div>
</section>
